<html>
<head>
  <script>
    // const worker = new Worker("worker.js");
    const worker = new Worker('worker.js', { type: 'module' });

    function onClick() {

      const f = document.getElementById("in-file").files[0];
      console.log("ğŸ“¤ Sending file to worker:", f);

      worker.postMessage([ f ]);
    }
    // ğŸ”¥ Receive message from worker
    worker.onmessage = (e) => {
      const data = e.data;

      if (data.result) {
        console.log("âœ… Main thread received result:", data.result);
        alert("File read result:\n" + data.result);
      } else if (data.log) {
        console.log("ğŸ“¥ Worker log:", data.log);
      } else if (data.error) {
        console.error("âŒ Error from worker:", data.error);
        alert("Worker Error: " + data.error);
      } else {
        console.log("ğŸ“¨ Worker sent unknown message:", data);
      }
    };

  </script>
</head>
<body>
<input type="file" id="in-file" />
<input type="button" onClick="onClick()" value="ok" />
</body>
</html>
